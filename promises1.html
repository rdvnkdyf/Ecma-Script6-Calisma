<!DOCTYPE html>
<html>
    <head>
        <title>Promises 1 </title>
    </head>
    <body>
        <div id="container">
            <div id="message"></div>
            <button id="btnGet">Get Message</button>
        </div>
        <script>
            //--------------------------------example 1
            // let completed=true;
            // let learnJS=new Promise(function(resolve,reject){
            //       if(completed){
            //         resolve("I have completed learning JS.");
            //       }else{
            //         reject("I haven't completed learning JS yet.");
            //       }
            // });
            // console.log(learnJS);

            //-----------------------------------example 2 
            // let completed=false;
            // let learnJS=new Promise(function(resolve,reject){
            //     setTimeout(()=>{
            //         if (completed) {
            //             resolve("I have completed learning JS.");
            //         } else {
            //             reject("I haven't completed learning JS yet.");
            //         }
            //     },1000);
            // });
            // console.log(learnJS);

            //then method promiseObject.then(onFulfilled, onRejected);

            //-------------------------------------example 3 
    //         function makePromise(completed) {
    //             return new Promise(function (resolve, reject) {
    //                setTimeout(() => {
    //                   if (completed) {
    //                       resolve("I have completed learning JS.");
    //                   } else {
    //                       reject("I haven't completed learning JS yet.");
    //                          }
    //                 }, 3 * 1000);
    //             });
    //         }
    //         //  let learnJS=makePromise(true);
    //         // //  learnJS.then(
    //         // //      success=>console.log(success),
    //         // //      reason=>console.log(reason)
    //         // //  );
    //         // learnJS.then(
    //         //     value=>console.log(value)
    //         // )
    //         // let masterJS = makePromise(false);
    //         // masterJS.then(
    //         //    undefined,
    //         //    reason => console.log(reason)
    //         // );
    //         let learnJS=makePromise(true);
    //         // learnJS.catch(
    //         //     reason=>console.log(reason)
    //         // )
    //         function createApp(){
    //             //------------
    //         }
    //         // learnJS
    //         //     .then(
    //         //         (success)=>{
    //         //             console.log(success);
    //         //             createApp();
    //         //         }
    //         //     ).catch(
    //         //         (reason)=>{
    //         //             console.log(reason);
    //         //             createApp();
    //         //         }
    //         //     );
            
    //         learnJS
    // .then(success => console.log(success))
    // .catch(reason => console.log(reason))
    // .finally(() => createApp());

         //-------------------------------example 4 
         function load(url){
             return new Promise(function(resolve,reject){
                const request=new XMLHttpRequest();
                request.onreadystatechange=function(e){
                    if(this.readyState==4){
                        if(this.status==200){
                            resolve(this.response);
                        }else{
                            reject(this.status);
                        }
                    }
                }
                request.open('GET',url,true);
                request.send(); 
             });
         }
         const btn = document.querySelector('#btnGet');
         const msg = document.querySelector('#message');

         btn.onclick=function(){
            load('https://www.javascripttutorial.net/sample/promise/api.json')
        .then(
            response => {
                const result = JSON.parse(response);
                msg.innerHTML = result.message;
            },
            error => msg.innerHTML = `Error getting the message, HTTP status: ${error}`
        );
         }


            

        </script>

    </body>
</html>